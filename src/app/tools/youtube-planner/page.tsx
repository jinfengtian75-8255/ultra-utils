'use client'

import { useState, useEffect, useMemo, useRef } from 'react'
import { Wand2, Sparkles, Zap, Copy, Check, Video, MessageSquare, Lightbulb, ChevronRight, Terminal, Sliders, Download } from 'lucide-react'
import { cn } from '@/lib/utils'
import { useLanguage } from '@/context/language-context'
import AdBanner from '@/components/AdBanner'
import { addRecentTool } from '@/lib/recent-tools'
import NextStep from '@/components/NextStep'

export default function YoutubePlannerPage() {
    const { t } = useLanguage()
    const [isMounted, setIsMounted] = useState(false)
    const [videoType, setVideoType] = useState('vlog')
    const [topic, setTopic] = useState('')
    const [tone, setTone] = useState('funny')
    const [target, setTarget] = useState('general')
    const [isGenerating, setIsGenerating] = useState(false)
    const [showResults, setShowResults] = useState(false)
    const [activeTab, setActiveTab] = useState('titles')
    const [mobileView, setMobileView] = useState<'setup' | 'results'>('setup')
    const [copied, setCopied] = useState<boolean | 'all'>(false)
    const toolRef = useRef<HTMLDivElement>(null)

    useEffect(() => {
        setIsMounted(true)
        addRecentTool({
            id: 'yt-planner',
            title: t.navbar.ytPlanner,
            href: '/tools/youtube-planner',
            iconName: 'Wand2'
        })
    }, [t])

    const handleGenerate = () => {
        if (!topic) return
        setIsGenerating(true)
        setShowResults(false)

        // Simulate AI processing
        setTimeout(() => {
            setIsGenerating(false)
            setShowResults(true)
            // Auto switch to results on mobile
            setMobileView('results')

            // Precision Scroll: Scroll directly to the tool container start
            if (window.innerWidth < 1024 && toolRef.current) {
                const offset = toolRef.current.offsetTop - 80;
                window.scrollTo({ top: offset, behavior: 'smooth' });
            }
        }, 1500)
    }

    const handleCopy = (text: string) => {
        navigator.clipboard.writeText(text)
        setCopied(text === 'all' ? 'all' : true)
        setTimeout(() => setCopied(false), 2000)
    }

    const handleDownload = () => {
        if (!generatedContent) return
        const content = `
[ ${t.ytPlanner.title} - ${topic} ]
-----------------------------------------
1. ${t.ytPlanner.tabTitles}
${generatedContent.titles.join('\n')}

2. ${t.ytPlanner.tabTags}
${generatedContent.tags}

3. ${t.ytPlanner.tabScripts}
${generatedContent.script}

4. ${t.ytPlanner.tabStrategy}
${generatedContent.strategy}
-----------------------------------------
Generated by UltraUtils AI
        `
        const blob = new Blob([content], { type: 'text/plain' })
        const url = URL.createObjectURL(blob)
        const a = document.createElement('a')
        a.href = url
        a.download = `yt_plan_${topic.replace(/\s+/g, '_')}.txt`
        document.body.appendChild(a)
        a.click()
        document.body.removeChild(a)
        URL.revokeObjectURL(url)
    }

    // --- Dynamic AI Simulation Logic ---
    const generatedContent = useMemo(() => {
        if (!topic) return null;

        const titlePatterns = {
            vlog: {
                funny: [
                    `ğŸ¤£ ${topic} í•˜ë‹¤ê°€ ì§„ì§œ ë°°ê¼½ ë¹ ì§ˆ ë»”...`,
                    `í˜„ì‹¤íŒ ${topic}! ë¸Œì´ë¡œê·¸ ì°ë‹¤ ë©˜ë¶• ì˜¨ ì‚¬ì—°`,
                    `ëˆ„ê°€ ${topic}ì„ ì´ë ‡ê²Œ í•´ìš”? ã…‹ã…‹ã…‹ (feat. ë³‘ë§›)`,
                    `ì ˆëŒ€ ë”°ë¼í•˜ì§€ ë§ˆì„¸ìš”... ${topic} ëŒ€ì‹¤íŒ¨ ë¸Œì´ë¡œê·¸`,
                    `${topic} í•˜ëŸ¬ ê°”ë‹¤ê°€ ì˜ë¬¸ì˜ ë˜¥ì°¸ê¸° ì±Œë¦°ì§€ ë¨`,
                    `ì•„ë‹ˆ.. ${topic}ì´ ì´ë ‡ê²Œ ì›ƒê¸´ ê±°ì˜€ìŒ? ã…‹ã…‹ã…‹`,
                    `${topic} ë¸Œì´ë¡œê·¸ ì°ëŠ”ë° ë’¤ì—ì„œ ì¹œêµ¬ê°€ ì¶¤ì¶”ê³  ìˆìŒ`,
                    `ì´ˆë”©ë„ ì•ˆ í•˜ëŠ” ${topic} ì‹¤ìˆ˜, ì œê°€ í•´ëƒˆìŠµë‹ˆë‹¤`,
                    `${topic} í•˜ë‹¤ê°€ ê²½ì°° ì˜¬ ë»”í•œ ì° í‘¼ë‹¤.. ğŸ˜‚`,
                    `ì¸ìƒì´ ì‹œíŠ¸ì½¤ì¸ ì‚¬ëŒì˜ ${topic} ì¼ìƒ ë¸Œì´ë¡œê·¸`
                ],
                serious: [
                    `ì§„ì†”í•˜ê²Œ ë‹´ì•„ë³¸ ${topic}ì˜ ê¸°ë¡`,
                    `ë‚˜ì˜ ì†Œì¤‘í•œ ì¼ìƒ, ê·¸ë¦¬ê³  ${topic}...`,
                    `ë‚´ê°€ ${topic}ì„ ê³„ì†í•˜ëŠ” ì´ìœ  (ì†”ì§í•œ ì‹¬ì •)`,
                    `ë§ˆìŒì´ í¸í•´ì§€ëŠ” ${topic} íë§ ë¸Œì´ë¡œê·¸`,
                    `ë²ˆì•„ì›ƒ ëì— ë§ˆì£¼í•œ ${topic}, ê·¸ë¦¬ê³  ê¹¨ë‹¬ìŒ`,
                    `ëˆ„êµ¬ì—ê²Œë„ ë§í•˜ì§€ ëª»í•œ ${topic}ì— ëŒ€í•œ ê³ ë¯¼`,
                    `ì¡°ìš©íˆ í˜¼ì ì¦ê¸°ëŠ” ${topic} ì¼ê¸°`,
                    `ë‚´ì¼ì„ ìœ„í•œ ì˜¤ëŠ˜ì˜ ${topic} ê¸°ë¡`,
                    `${topic}ì„ í†µí•´ ë°°ìš´ ì‚¶ì˜ íƒœë„`,
                    `í‰ë²”í•œ ì¼ìƒì´ ${topic}ìœ¼ë¡œ íŠ¹ë³„í•´ì§€ëŠ” ê³¼ì •`
                ],
                professional: [
                    `í”„ë¡œ í¬ë¦¬ì—ì´í„°ì˜ ${topic} ë¼ì´í”„ ìŠ¤íƒ€ì¼`,
                    `${topic}ê³¼ í•¨ê»˜í•˜ëŠ” ìƒì‚°ì ì¸ í•˜ë£¨ ë£¨í‹´`,
                    `ê³ í€„ë¦¬í‹° ì¼ìƒ ì˜ìƒ: ${topic} í¸`,
                    `íš¨ìœ¨ì ì¸ ${topic}ì„ ìœ„í•œ ë¸Œì´ë¡œê·¸ ì¥ë¹„ ì„¸íŒ…`,
                    `ì§ì—…ì´ ${topic}ì¸ ì‚¬ëŒì˜ í”í•œ ì¶œê·¼ ë£¨í‹´`,
                    `${topic} ì „ë¬¸ê°€ì˜ ë¸Œì´ë¡œê·¸ëŠ” ë¬´ì—‡ì´ ë‹¤ë¥¼ê¹Œ?`,
                    `ì¼ìƒ ì† ${topic}ì„ ì˜ˆìˆ ë¡œ ë§Œë“œëŠ” í¸ì§‘ ê¿€íŒ`,
                    `${topic} ì»¨í…ì¸ ë¥¼ ìœ„í•œ ì¥ì†Œ ì„­ì™¸ ë° ì´¬ì˜ ë¹„í•˜ì¸ë“œ`,
                    `ì›Œì»¤í™€ë¦­ì˜ ${topic} ë¸Œì´ë¡œê·¸ (feat. ê°“ìƒ ì‚´ê¸°)`,
                    `ê³ í€„ë¦¬í‹° ë¸Œì´ë¡œê·¸ì˜ ì •ì„: ${topic} ì´¬ì˜ ë…¸í•˜ìš°`
                ]
            },
            info: {
                funny: [
                    `ë¹¡ì¹˜ê¸° ì „ì— ê¼­ ë´ì•¼í•  ${topic} ì™„ë²½ ê°€ì´ë“œ`,
                    `ì¼ë¯¼ì´ë„ ì´í•´í•˜ëŠ” ${topic} ì´ˆê°„ë‹¨ ì •ë¦¬`,
                    `${topic} í•˜ë‹¤ê°€ ë¹¡ì³ì„œ ë§Œë“  ì˜ìƒ (í•µê¹”ë”)`,
                    `ì´ê±° ëª¨ë¥´ë©´ ${topic} í•˜ë‹¤ê°€ í˜¸êµ¬ ë©ë‹ˆë‹¤ ã…‹ã…‹`,
                    `${topic} ì „ë¬¸ê°€ë¼ê³  ìë¶€í•˜ë˜ ì¹œêµ¬ì˜ ì²˜ì°¸í•œ ìµœí›„`,
                    `ë‹¹ì‹ ì´ ì•Œë˜ ${topic}ì€ ë‹¤ ê°€ì§œì…ë‹ˆë‹¤ (ì¶©ê²©ì£¼ì˜)`,
                    `${topic} 3ë¶„ ìš”ì•½ ì•ˆ ë³´ë©´ ì˜¤ëŠ˜ ì  ì•ˆ ì˜´`,
                    `ë‡Œ ë¹¼ê³  ë´ë„ ì´í•´ë˜ëŠ” ${topic} ê°œë¡ `,
                    `ì—„ë§ˆë„ ë¬¼ì–´ë³´ëŠ” ${topic}, ì´ ì˜ìƒ í•˜ë‚˜ë¡œ ì¢…ê²°`,
                    `${topic} ë•Œë¬¸ì— ë°¤ìƒˆ ë³¸ ì‚¬ëŒ? ì´ê±° ë³´ê³  ìëŸ¬ ê°€ì…ˆ`
                ],
                serious: [
                    `${topic}ì˜ ìˆ¨ê²¨ì§„ ìœ„ê¸°, ìš°ë¦¬ê°€ ëª°ëë˜ ì§„ì‹¤`,
                    `í•™ìˆ ì ìœ¼ë¡œ ì ‘ê·¼í•œ ${topic}ì˜ ê¸°ì›ê³¼ ë¯¸ë˜`,
                    `${topic}, ê³¼ì—° ì´ëŒ€ë¡œ ê´œì°®ì€ê°€? (ì‹¬ì¸µ ë¶„ì„)`,
                    `ì‹¬ë„ ê¹Šì€ í†µì°°: ${topic}ì— ëŒ€í•œ ëª¨ë“  ë¦¬í¬íŠ¸`,
                    `ì—­ì‚¬ë¥¼ ë°”ê¾¼ ${topic}, ê·¸ ì´ë©´ì˜ ì´ì•¼ê¸°ë“¤`,
                    `${topic}ì´ ìš°ë¦¬ ì‚¬íšŒì— ë¯¸ì¹˜ëŠ” ì˜í–¥ (PD ìˆ˜ì²© í†¤)`,
                    `ì „ë¬¸ê°€ê°€ ë³¸ ${topic} ì‹œì¥ì˜ ì¥ê¸° ì „ë§`,
                    `ëˆ„êµ¬ë„ ê°€ë¥´ì³ì£¼ì§€ ì•ŠëŠ” ${topic}ì˜ ë³¸ì§ˆ`,
                    `${topic}ì˜ ì‹¤ì²´: ê³¼ì—° ë¬´ì—‡ì´ ì§„ì‹¤ì¼ê¹Œ?`,
                    `ê¸°ìˆ ì  ë¶„ì„: ${topic}ì˜ íŒ©íŠ¸ì™€ ë£¨ë¨¸`
                ],
                professional: [
                    `[ì „ë¬¸ê°€ ê°€ì´ë“œ] ${topic} ì™„ë²½ ë§ˆìŠ¤í„°í•˜ê¸°`,
                    `${topic} ì‹¤ì „ ì „ëµ: ìƒìœ„ 1%ë§Œ ì•„ëŠ” ë…¸í•˜ìš°`,
                    `ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ì ì—ì„œì˜ ${topic} í™œìš©ë²•`,
                    `${topic} ì…ë¬¸ë¶€í„° ì‹¬í™”ê¹Œì§€! 1ì‹œê°„ ì••ì¶• ê°•ì˜`,
                    `í”„ë¡œë¥¼ ìœ„í•œ ${topic} ê³ ê¸‰ í™œìš© í…Œí¬ë‹‰`,
                    `${topic} ì‹œì¥ì—ì„œ ì„±ê³µí•˜ëŠ” í™•ì‹¤í•œ ë¡œë“œë§µ`,
                    `ì—…ê³„ 1ìœ„ê°€ ì œì•ˆí•˜ëŠ” ${topic} í”„ë¡œì íŠ¸ ê´€ë¦¬ë²•`,
                    `${topic} ë°ì´í„° ë¶„ì„ì„ í†µí•œ íŠ¸ë Œë“œ ì˜ˆì¸¡`,
                    `ì„±ê³µì ì¸ ${topic} í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë§Œë“œëŠ” ë²•`,
                    `ì»¨ì„¤í„´íŠ¸ê°€ ê³µê°œí•˜ëŠ” ${topic} íš¨ìœ¨ ê·¹ëŒ€í™” ë¹„ë²•`
                ]
            },
            review: {
                funny: [
                    `ëˆ ì§€ë„ì¸ê°€? ${topic} ì§ì ‘ ì¨ë³´ë‹ˆ... ğŸ˜‚`,
                    `ê´‘ê³  ì•„ë‹˜! ${topic} ë‚´ëˆë‚´ì‚° ì†”ì§ ë¦¬ë·° (ìš• ì£¼ì˜)`,
                    `ëŒ€ê¸°ì—…ì´ ì‹«ì–´í•  ${topic} ë‹¨ì  íŒ©íŠ¸ í­ê²©`,
                    `${topic}? ê·¸ëƒ¥ ì´ê±° ì‚¬ì§€ ë§ˆì„¸ìš” ã…‹ã…‹ã…‹`,
                    `${topic} ë¦¬ë·°í•˜ë‹¤ê°€ ë¬¼ê±´ ë˜ì§ˆ ë»”í•œ ì‚¬ì—°`,
                    `ì´ê±¸ ì™œ ì´ì œ ìƒ€ì§€? ${topic} ê°œê¿€í…œ ë°œê²¬!`,
                    `${topic} ë¦¬ë·°ê³„ì˜ ì´ë‹¨ì•„ ë“±ì¥ (ì†”ì§í•¨ 200%)`,
                    `ì¹œêµ¬í•œí…Œ ìš• ë¨¹ê³  ì¶”ì²œí•˜ëŠ” ${topic} ë¦¬ë·°`,
                    `ì‹¼ ê²Œ ë¹„ì§€ë–¡? ${topic} ê°€ì„±ë¹„ í…ŒìŠ¤íŠ¸`,
                    `ì´ê±° ë§Œë“  ì‚¬ëŒ ëˆ„êµ¬ëƒ? ${topic} í™©ë‹¹ ë¦¬ë·°`
                ],
                serious: [
                    `${topic} í•œ ë‹¬ ì‚¬ìš©ê¸°: ê³¼ì—° ê¸°ëŒ€ë§Œí¼ì¼ê¹Œ?`,
                    `ê°ê´€ì ìœ¼ë¡œ ë¹„êµí•œ ${topic} vs ê²½ìŸ ëª¨ë¸`,
                    `ì „ë¬¸ê°€ê°€ í‰ê°€í•œ ${topic}ì˜ ë‚´êµ¬ì„± í…ŒìŠ¤íŠ¸`,
                    `${topic}, ì¥ì ë³´ë‹¤ ë‹¨ì ì´ ë” ì¹˜ëª…ì ì¸ ì´ìœ `,
                    `${topic} êµ¬ë§¤ ì „ í•„ìˆ˜ ì‹œì²­! (í›„íšŒ ì˜ˆë°©)`,
                    `ì‹¤ì‚¬ìš©ì 100ëª…ì´ ë§í•˜ëŠ” ${topic}ì˜ ë¦¬ì–¼ í›„ê¸°`,
                    `${topic}ì˜ ë””í…Œì¼í•œ ë¦¬ë·°: ëíŒì™• ë“±ì¥`,
                    `ê°€ê²© ê·¸ ì´ìƒì˜ ê°€ì¹˜? ${topic} ì‹¬ì¸µ ë¦¬ë·°`,
                    `${topic} í•˜ë“œì›¨ì–´ ë° ì†Œí”„íŠ¸ì›¨ì–´ ì´í‰`,
                    `ì¥ê¸°ê°„ ì‚¬ìš© í›„ ë³¸ ${topic}ì˜ ë¯¼ë‚¯`
                ],
                professional: [
                    `ì‚°ì—… í‘œì¤€ ì ê²€: ${topic} ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸`,
                    `ì—”ì§€ë‹ˆì–´ ì…ì¥ì—ì„œ ë³¸ ${topic}ì˜ ê¸°ìˆ ì  êµ¬ì¡°`,
                    `B2B ë¦¬ë·°: ê¸°ì—…ìš©ìœ¼ë¡œ ë³¸ ${topic}ì˜ ê°€ì¹˜`,
                    `${topic} ì‹¬ì¸µ ë¶„ì„: ì„±ëŠ¥ê³¼ ê°€ì„±ë¹„ì˜ ê· í˜•ì `,
                    `í…Œí¬ ìœ íŠœë²„ê°€ ì¶”ì²œí•˜ëŠ” ìµœê³  ì‚¬ì–‘ ${topic}`,
                    `êµ­ë‚´ ìµœì´ˆ ${topic} ì–¸ë°•ì‹± ë° ì„±ëŠ¥ í‰ê°€`,
                    `${topic} ê³µì‹ ëª…ì„¸ì„œ ë¶„ì„ ë° ì‹¤ì œ ì„±ëŠ¥ ë¹„êµ`,
                    `ì›Œí¬í”Œë¡œìš° ìµœì í™”ë¥¼ ìœ„í•œ ${topic} ë„ì… ê°€ì´ë“œ`,
                    `ìƒì‚°ì„± í–¥ìƒì„ ìœ„í•œ ${topic} í•„ìˆ˜ ì ê²€ ë¦¬ìŠ¤íŠ¸`,
                    `ë¹„ì¦ˆë‹ˆìŠ¤ íš¨ìœ¨ì„ ë†’ì—¬ì£¼ëŠ” ${topic} ì†”ì§ ë¦¬ë·°`
                ]
            },
            shorts: {
                funny: [
                    `${topic} 1ì´ˆ ë§Œì— í•˜ëŠ” ë²• ã…‹ã…‹ã…‹`,
                    `í”í•œ í•œêµ­ì¸ì˜ ${topic} ì†ë„... ë¯¸ì³¤ìŒ`,
                    `ì ˆëŒ€ ëê¹Œì§€ ë³´ì§€ë§ˆì„¸ìš”... ${topic} ë°˜ì „`,
                    `ì§„ì§œ ${topic} ëíŒì™• ë“±ì¥ ã„·ã„·`,
                    `${topic} í•˜ë‹¤ê°€ í˜„íƒ€ ì˜¨ ìˆœê°„ ğŸ¤£`,
                    `ë„ˆë§Œ ëª¨ë¥´ëŠ” ${topic} ê°œê¿€íŒ`,
                    `${topic} ì‹¤íŒ¨ ì˜ìƒ (ì›ƒìŒ ì°¸ê¸° í˜ë“¦)`,
                    `ì¹œêµ¬ ëª°ë˜ ${topic} í•´ì£¼ê¸° ëª°ì¹´ ã…‹ã…‹ã…‹`,
                    `ì´ ì˜ìƒ ë³´ë©´ ${topic} í•˜ê³  ì‹¶ì–´ì§`,
                    `ì„¸ìƒì—ì„œ ê°€ì¥ ë¹ ë¥¸ ${topic} ì±Œë¦°ì§€`
                ],
                serious: [
                    `60ì´ˆ ì•ˆì— ë°°ìš°ëŠ” ${topic}ì˜ í•µì‹¬`,
                    `ì•„ë¬´ë„ ëª°ëë˜ ${topic}ì˜ ì†Œë¦„ë‹ëŠ” ì‚¬ì‹¤`,
                    `ë‹¹ì‹ ì´ ë†“ì¹˜ê³  ìˆëŠ” ${topic} ê¿€íŒ`,
                    `ë‹¨ 30ì´ˆ, ${topic}ì´ ì¸ìƒì„ ë°”ê¿€ ìˆ˜ ìˆë‹¤ë©´?`,
                    `${topic}ì˜ ìœ„ë ¥: 15ì´ˆë©´ ì¶©ë¶„í•©ë‹ˆë‹¤`,
                    `ì´ê±° ë³¸ í›„ë¡œ ${topic}ì´ ë‹¬ë¼ì¡Œì–´ìš”`,
                    `${topic} ì…ë¬¸ìë¥¼ ìœ„í•œ í•„ìˆ˜ ì‡¼ì¸ `,
                    `30ì´ˆ ì •ë¦¬: ${topic}ì— ëŒ€í•œ ì˜¤í•´ì™€ ì§„ì‹¤`,
                    `${topic} í•µì‹¬ ìš”ì•½ë³¸ (ì €ì¥ í•„ìˆ˜)`,
                    `ë‹¹ì‹ ì˜ ì‹œê°„ì„ ì•„ê»´ì¤„ ${topic} ê°€ì´ë“œ`
                ],
                professional: [
                    `í”„ë¡œê°€ ì•Œë ¤ì£¼ëŠ” ${topic} ìˆí¼ ê³µì‹`,
                    `${topic} íš¨ìœ¨ 200% ë†’ì´ëŠ” ë°©ë²•`,
                    `Shorts ì „ëµ: ${topic} ì•Œê³ ë¦¬ì¦˜ íƒ€ëŠ” ë²•`,
                    `ë°”ìœ í˜„ëŒ€ì¸ì„ ìœ„í•œ ${topic} 60ì´ˆ ìš”ì•½`,
                    `ì„±ê³µì ì¸ ${topic} ì‡¼ì¸  ì œì‘ ê¸°ìˆ `,
                    `${topic} ì‡¼ì¸  ì¡°íšŒìˆ˜ ë–¡ìƒí•˜ëŠ” ì¹˜íŠ¸í‚¤`,
                    `15ì´ˆì˜ ë¯¸í•™: ${topic}ìœ¼ë¡œ ì‹œì²­ì ì‚¬ë¡œì¡ê¸°`,
                    `${topic} ì „ë¬¸ê°€ì˜ ìˆí¼ ë£¨í‹´ ëŒ€ê³µê°œ`,
                    `${topic} ìˆí¼ìœ¼ë¡œ í¼ìŠ¤ë„ ë¸Œëœë”© í•˜ê¸°`,
                    `ê¸°ì—…ìš© ì‡¼ì¸  ê¸°íš: ${topic} í™œìš© ë°±ì„œ`
                ]
            }
        };

        const currentType = titlePatterns[videoType as keyof typeof titlePatterns] || titlePatterns.vlog;
        const currentTone = currentType[tone as keyof typeof currentType] || currentType.professional;

        // More advanced deterministic selection for variety
        const topicHash = Array.from(topic).reduce((acc, char) => acc + char.charCodeAt(0), 0);
        const startIndex = topicHash % Math.max(1, currentTone.length - 4);
        const selectedTitles = currentTone.slice(startIndex, startIndex + 5);

        const tagBases = ['YouTube', 'Creator', 'Tip', 'Trend', 'Viral', 'Motivation', 'Hacks', 'Korea', 'Global'];
        const selectedBases = tagBases.sort(() => 0.5 - (topicHash % 10 / 10)).slice(0, 5);
        const dynamicTags = [topic, ...selectedBases.map(b => topic + b), 'UltraUtils'].map(t => `#${t.replace(/\s+/g, '')}`).join(' ');

        const scriptIntros = {
            beginner: `ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ì€ '${topic}'ì— ì•„ì˜ˆ ì²˜ìŒ ì…ë¬¸í•˜ì‹œëŠ” ë¶„ë“¤ì„ ìœ„í•´ ê¸°ì´ˆë¶€í„° íƒ„íƒ„í•˜ê²Œ, í•˜ë‚˜í•˜ë‚˜ ì§šì–´ë“œë¦´ê²Œìš”. ì–´ë µê²Œë§Œ ëŠê»´ì¡Œë˜ '${topic}', ì´ ì˜ìƒ í•˜ë‚˜ë©´ ëë‚©ë‹ˆë‹¤!`,
            general: `ë°˜ê°‘ìŠµë‹ˆë‹¤! ìš”ì¦˜ ì–´ë””ë¥¼ ê°€ë‚˜ '${topic}' ì´ì•¼ê¸°ê°€ ë¹ ì§€ì§ˆ ì•Šì£ ? ê³¼ì—° ì™œ ì´ë ‡ê²Œ í™”ì œì¸ì§€, ê·¸ë¦¬ê³  ìš°ë¦¬ê°€ ì£¼ëª©í•´ì•¼ í•  í¬ì¸íŠ¸ëŠ” ë¬´ì—‡ì¸ì§€ ì§€ê¸ˆ ë°”ë¡œ ì•Œì•„ë´…ì‹œë‹¤!`,
            expert: `ë°˜ê°‘ìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ì€ '${topic}' ë¶„ì•¼ì—ì„œ í•œ ë‹¨ê³„ ë” ë‚˜ì•„ê°€ê³ ì í•˜ëŠ” ë¶„ë“¤ì„ ìœ„í•´ ê³ ë‚œë„ í…Œí¬ë‹‰ê³¼ í˜„ì§ ì „ë¬¸ê°€ë“¤ë§Œ ì•„ëŠ” ì‹¤ë¬´ ì¸ì‚¬ì´íŠ¸ë¥¼ ì‹¬ì¸µì ìœ¼ë¡œ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.`
        };

        const currentIntro = scriptIntros[target as keyof typeof scriptIntros] || scriptIntros.general;

        const thumbnailPatterns = [
            `ğŸ˜± ${topic} ì§„ì§œ ì‹¤í™”? (ì¶©ê²©)`,
            `ì‚¬ì¥ë‹˜ ëª°ë˜ ì°ì€ ${topic} ë¹„ê²°`,
            `ì¸ìƒ í•„ìˆ˜í…œ ${topic} (ì•ˆ ì‚¬ë©´ í›„íšŒ)`,
            `${topic} 1ë¶„ ì»·! (ì´ˆê°„ë‹¨)`,
            `ì ˆëŒ€ ë”°ë¼í•˜ì§€ ë§ˆì„¸ìš”.. ${topic} ê²½ê³ `,
            `1%ë§Œ ì•„ëŠ” ${topic}ì˜ ë¹„ë°€ ëŒ€ê³µê°œ`,
            `ì´ê²ƒë§Œ ì•Œë©´ ë‹¹ì‹ ë„ ${topic} ê³ ìˆ˜`,
            `ì§„ì§œ ${topic} ëíŒì™•ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤`,
            `ë‚´ ëˆ ë‹¤ ë‚ ë¦° ${topic} ì†”ì§ í›„ê¸°`,
            `ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ${topic} (ê¿€íŒ)`
        ];
        const selectedThumbnailText = thumbnailPatterns.sort(() => 0.5 - (topicHash % 7 / 7)).slice(0, 4);

        const strategyPatterns = {
            vlog: `ğŸ“ ${topic} ë¸Œì´ë¡œê·¸ ë…¸ì¶œ ì „ëµ:\n1. ì¸ë„¤ì¼ í¬ì¸íŠ¸: ìì—°ìŠ¤ëŸ¬ìš´ ì¼ìƒ ì»·ê³¼ ìƒë°˜ë˜ëŠ” ìê·¹ì ì¸ í…ìŠ¤íŠ¸ ì¡°í•© ì œì•ˆ.\n2. ì œëª©ì— 'ì°/í›„ê¸°/ëª°ëë˜' ë‹¨ì–´ë¥¼ í¬í•¨í•˜ì—¬ í´ë¦­ë¥  ìœ ë„.\n3. ê³ ì • ëŒ“ê¸€ì„ í†µí•´ ì‹œì²­ìì™€ ì†Œí†µí•˜ê³  'ë‹¤ìŒ í¸'ì— ëŒ€í•œ ê¸°ëŒ€ê° ì‹¬ì–´ì£¼ê¸°.\n4. ì‹œì²­ ëŒ€ìƒ [${target}]ì˜ í™œë™ ì‹œê°„ì— ë§ì¶° ì—…ë¡œë“œ ê¶Œì¥.`,
            info: `ğŸ“ ${topic} ì •ë³´ì „ë‹¬ ë…¸ì¶œ ì „ëµ:\n1. ì¸ë„¤ì¼ í¬ì¸íŠ¸: ê¹”ë”í•œ ë°°ê²½ìƒ‰ê³¼ ê³ í•´ìƒë„ í…ìŠ¤íŠ¸ë¡œ 'ì‹ ë¢°ê°' í˜•ì„±.\n2. í•µì‹¬ í‚¤ì›Œë“œë¥¼ ì œëª© ì•ë¶€ë¶„ì— ë°°ì¹˜í•˜ì—¬ ê²€ìƒ‰ ë…¸ì¶œ(SEO) ìµœì í™”.\n3. ì˜ìƒ ì„¤ëª…ë€ì— íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ì œê³µí•˜ì—¬ ì‹œì²­ ì§€ì† ì‹œê°„ í–¥ìƒ.\n4. ê´€ë ¨ ìˆëŠ” ëŒ€í˜• ì±„ë„ì˜ ëŒ“ê¸€ì°½ì„ ì°¸ê³ í•˜ì—¬ íƒ€ê²ŸíŒ… í‚¤ì›Œë“œ ë°œêµ´.`,
            review: `ğŸ“ ${topic} ì œí’ˆ ë¦¬ë·° ë…¸ì¶œ ì „ëµ:\n1. ì¸ë„¤ì¼ í¬ì¸íŠ¸: ì œí’ˆì˜ í´ë¡œì¦ˆì—… ìƒ·ê³¼ 'ê°ì •(í‘œì •)'ì´ ë“œëŸ¬ë‚˜ëŠ” ì—°ì¶œ.\n2. ì œëª©ì— êµ¬ì²´ì ì¸ ê°€ê²©ì´ë‚˜ 'ëˆ ê°’ í•˜ëŠ”ê°€?' ë“±ì˜ ì§ˆë¬¸í˜• ë¬¸êµ¬ ë°°ì¹˜.\n3. ì˜ìƒ ì´ˆë°˜ 5ì´ˆ ë‚´ì— 'ì´ ì œí’ˆì˜ ê°€ì¥ ì¹˜ëª…ì ì¸ ë‹¨ì 'ì„ ì–¸ê¸‰í•˜ì—¬ ì´íƒˆ ë°©ì§€.\n4. ì„¤ëª…ë€ì— ì œíœ´ ë§í¬ ë° ìƒì„¸ ìŠ¤í™ì„ ì •ë¦¬í•˜ì—¬ ì •ë³´ì„± ê°•í™”.`,
            shorts: `ğŸ“ ${topic} ìˆí¼ ë…¸ì¶œ ì „ëµ:\n1. ì¸ë„¤ì¼ í¬ì¸íŠ¸: ê°€ì¥ ì—­ë™ì ì¸ ìˆœê°„ì´ë‚˜ ê²°ê³¼ë¬¼ì„ ë‹¨ 0.1ì´ˆ ë§Œì— ë³´ì—¬ì£¼ê¸°.\n2. ì²« 3ì´ˆ ì•ˆì— ì‹œì„ ì„ ëŒì§€ ëª»í•˜ë©´ íŒ¨ë°°! ë¬´ì¡°ê±´ ê°•ë ¬í•œ ì‚¬ìš´ë“œì™€ ìë§‰ìœ¼ë¡œ ì‹œì‘.\n3. ëê¹Œì§€ ë³´ì§€ ì•Šìœ¼ë©´ ì•Œ ìˆ˜ ì—†ëŠ” 'ë°˜ì „' ìš”ì†Œë¥¼ ë°°ì¹˜í•˜ì—¬ ë£¨í”„ ìœ ë„.\n4. í•´ì‹œíƒœê·¸ì— íŠ¸ë Œë“œ í‚¤ì›Œë“œì™€ ì»¨ì…‰(#${topic})ì„ ì ì ˆíˆ í˜¼í•©.`
        };

        const currentStrategy = strategyPatterns[videoType as keyof typeof strategyPatterns] || strategyPatterns.vlog;

        return {
            titles: selectedTitles,
            tags: dynamicTags,
            thumbnailText: selectedThumbnailText,
            script: `[ì¸íŠ¸ë¡œ: 20ì´ˆ]\n${currentIntro}\n\n[ë³¸ë¡ : 4~8ë¶„]\n1. ${topic}ì„ ëŒ€í•˜ëŠ” ì˜¬ë°”ë¥¸ ìì„¸ (ë§ˆì¸ë“œì…‹)\n2. ${tone === 'funny' ? 'í¬ë³µì ˆë„' : tone === 'professional' ? 'ì²´ê³„ì ì¸' : 'ì§„ì •ì„± ìˆëŠ”'} ì‹¤ì „ í™œìš© ì‚¬ë¡€ 3ê°€ì§€\n3. ${target === 'beginner' ? 'ì´ˆë³´ìê°€ ê°€ì¥ ë§ì´ í•˜ëŠ” ì‹¤ìˆ˜ TOP 5' : 'ìƒìœ„ 1%ë§Œ ì•„ëŠ” ìˆ¨ê²¨ì§„ ê¿€íŒ'} ëŒ€ê³µê°œ\n4. ì‹¤ì œ ì‚¬ìš©ìë“¤ì´ ê¶ê¸ˆí•´í•˜ëŠ” ${topic} Q&A ì„¸ì…˜\n\n[ì•„ì›ƒíŠ¸ë¡œ: 40ì´ˆ]\nì˜¤ëŠ˜ ì˜ìƒì´ ë„ì›€ë˜ì…¨ë‹¤ë©´ êµ¬ë…ê³¼ ì¢‹ì•„ìš” ë¶€íƒë“œë ¤ìš”! '${topic}'ì— ëŒ€í•´ ë” ê¶ê¸ˆí•œ ì ì´ ìˆë‹¤ë©´ ëŒ“ê¸€ ë‚¨ê²¨ì£¼ì„¸ìš”. ë‹¤ìŒ ì˜ìƒì—ì„œ ë§Œë‚˜ìš”!`,
            strategy: currentStrategy
        };
    }, [topic, videoType, tone, target]);

    if (!isMounted) return null

    const videoTypes = [
        { id: 'vlog', label: t.ytPlanner.vlog, icon: Video },
        { id: 'info', label: t.ytPlanner.info, icon: Lightbulb },
        { id: 'review', label: t.ytPlanner.review, icon: Sparkles },
        { id: 'shorts', label: t.ytPlanner.shorts, icon: Zap }
    ]

    return (
        <div className="max-w-7xl mx-auto space-y-12 pb-20">
            {/* Header Section */}
            <div className="text-center space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700">
                <div className="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-amber-500/10 text-amber-600 dark:text-amber-400 text-xs font-bold uppercase tracking-widest border border-amber-500/20">
                    <Sparkles className="w-4 h-4" /> Creator Studio
                </div>
                <h1 className="text-4xl font-extrabold tracking-tight sm:text-6xl">
                    <span className="text-gradient from-amber-500 to-rose-500 font-black">{t.ytPlanner.title}</span>
                </h1>
                <p className="text-muted-foreground text-lg max-w-2xl mx-auto leading-relaxed">
                    {t.ytPlanner.desc}
                </p>
            </div>

            {/* Top Ad Slot */}
            <div className="max-w-4xl mx-auto px-4">
                <AdBanner slot="top-banner-planner" />
            </div>

            <div ref={toolRef} className="space-y-8">
                {/* Mobile View Toggle */}
                <div className="lg:hidden sticky top-16 z-40 flex bg-white/95 dark:bg-zinc-950/95 backdrop-blur-md p-1.5 rounded-2xl border border-zinc-200 dark:border-zinc-800 shadow-xl mx-4">
                    <button
                        onClick={() => setMobileView('setup')}
                        className={cn(
                            "flex-1 py-3 rounded-xl text-sm font-black transition-all flex items-center justify-center gap-2",
                            mobileView === 'setup' ? "bg-amber-500 text-white shadow-md" : "text-zinc-500"
                        )}
                    >
                        <Sliders className="w-4 h-4" /> {t.ytPlanner.setupTab}
                    </button>
                    <button
                        onClick={() => setMobileView('results')}
                        className={cn(
                            "flex-1 py-3 rounded-xl text-sm font-black transition-all flex items-center justify-center gap-2",
                            mobileView === 'results' ? "bg-amber-500 text-white shadow-md" : "text-zinc-500"
                        )}
                    >
                        <Terminal className="w-4 h-4" /> {t.ytPlanner.resultsTab}
                        {showResults && <span className="w-2 h-2 rounded-full bg-rose-500 animate-pulse" />}
                    </button>
                </div>

                <div className="grid lg:grid-cols-2 gap-12 items-start px-4">
                    {/* Left Side: Inputs */}
                    <div className={cn(
                        "glass-card p-6 sm:p-10 rounded-[2.5rem] sm:rounded-[3rem] space-y-8 sm:space-y-10 animate-in fade-in slide-in-from-left-8 duration-700 delay-200",
                        mobileView !== 'setup' && "hidden lg:block"
                    )}>
                        <div className="space-y-6">
                            <label className="text-sm font-bold flex items-center gap-2 uppercase tracking-widest text-muted-foreground italic">
                                1. {t.ytPlanner.videoType}
                            </label>
                            <div className="grid grid-cols-2 gap-3">
                                {videoTypes.map((type) => (
                                    <button
                                        key={type.id}
                                        onClick={() => setVideoType(type.id)}
                                        className={cn(
                                            "relative group flex items-center justify-center gap-3 py-5 px-6 rounded-2xl font-bold transition-all overflow-hidden",
                                            videoType === type.id
                                                ? "bg-amber-500 text-white shadow-xl scale-[1.02]"
                                                : "bg-zinc-100 dark:bg-zinc-800 text-muted-foreground hover:bg-zinc-200 dark:hover:bg-zinc-700"
                                        )}
                                    >
                                        <type.icon className={cn("w-5 h-5", videoType === type.id ? "animate-pulse" : "group-hover:scale-110 transition-transform")} />
                                        <span>{type.label}</span>
                                    </button>
                                ))}
                            </div>
                        </div>

                        <div className="space-y-6">
                            <label className="text-sm font-bold flex items-center gap-2 uppercase tracking-widest text-muted-foreground italic lg:mt-6">
                                2. {t.ytPlanner.topic}
                            </label>
                            <div className="relative group">
                                <input
                                    value={topic}
                                    onChange={(e) => setTopic(e.target.value)}
                                    placeholder={t.ytPlanner.topicPlaceholder}
                                    className="w-full pl-8 pr-16 py-6 rounded-3xl bg-zinc-100 dark:bg-zinc-800 border-2 border-transparent focus:border-amber-500/30 focus:ring-4 focus:ring-amber-500/10 text-xl font-medium transition-all outline-none"
                                />
                                <div className="absolute right-6 top-1/2 -translate-y-1/2 text-muted-foreground opacity-50 group-focus-within:text-amber-500 group-focus-within:opacity-100 transition-all pointer-events-none">
                                    <MessageSquare className="w-6 h-6" />
                                </div>
                            </div>
                        </div>

                        <div className="pt-6 border-t border-zinc-100 dark:border-zinc-800 space-y-8">
                            <div className="space-y-4">
                                <label className="text-xs font-black uppercase tracking-widest text-muted-foreground/60">{t.ytPlanner.advancedOptions}</label>
                                <div className="grid grid-cols-2 gap-8">
                                    <div className="space-y-4">
                                        <span className="text-sm font-bold block">{t.ytPlanner.tone}</span>
                                        <select
                                            value={tone}
                                            onChange={(e) => setTone(e.target.value)}
                                            className="w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 text-sm font-medium outline-none focus:ring-2 focus:ring-amber-500/20 transition-all"
                                        >
                                            <option value="funny">{t.ytPlanner.toneFunny}</option>
                                            <option value="serious">{t.ytPlanner.toneSerious}</option>
                                            <option value="professional">{t.ytPlanner.toneProfessional}</option>
                                        </select>
                                    </div>
                                    <div className="space-y-4">
                                        <span className="text-sm font-bold block">{t.ytPlanner.targetAudience}</span>
                                        <select
                                            value={target}
                                            onChange={(e) => setTarget(e.target.value)}
                                            className="w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 text-sm font-medium outline-none focus:ring-2 focus:ring-amber-500/20 transition-all"
                                        >
                                            <option value="general">{t.ytPlanner.targetGeneral}</option>
                                            <option value="expert">{t.ytPlanner.targetExpert}</option>
                                            <option value="beginner">{t.ytPlanner.targetBeginner}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <button
                                onClick={handleGenerate}
                                disabled={!topic || isGenerating}
                                className={cn(
                                    "w-full py-6 rounded-[2rem] font-black text-2xl flex items-center justify-center gap-4 transition-all shadow-2xl relative overflow-hidden group",
                                    topic && !isGenerating
                                        ? "bg-gradient-to-r from-amber-500 via-rose-500 to-amber-500 bg-[length:200%_auto] hover:bg-right hover:scale-[1.02] active:scale-95 text-white"
                                        : "bg-zinc-200 dark:bg-zinc-800 text-muted-foreground cursor-not-allowed"
                                )}
                            >
                                {isGenerating ? (
                                    <>
                                        <Wand2 className="w-8 h-8 animate-spin" />
                                        <span>{t.ytPlanner.generating}</span>
                                    </>
                                ) : (
                                    <>
                                        <Zap className="w-8 h-8 group-hover:animate-bounce" />
                                        <span>{t.ytPlanner.generateBtn}</span>
                                    </>
                                )}
                            </button>
                        </div>
                    </div>

                    {/* Right Side: Results */}
                    <div className={cn(
                        "space-y-8 animate-in fade-in slide-in-from-right-8 duration-700 delay-300",
                        mobileView !== 'results' && "hidden lg:block"
                    )}>
                        <div className="overflow-hidden rounded-[2.5rem] sm:rounded-[3rem] shadow-2xl bg-zinc-950 border border-white/10 flex flex-col min-h-[500px] sm:min-h-[640px]">
                            {/* Fake Browser Header */}
                            <div className="bg-zinc-900 p-6 flex items-center justify-between border-b border-white/5 h-20">
                                <div className="flex gap-2">
                                    <div className="w-3 h-3 rounded-full bg-rose-500/40" />
                                    <div className="w-3 h-3 rounded-full bg-amber-500/40" />
                                    <div className="w-3 h-3 rounded-full bg-emerald-500/40" />
                                </div>
                                <div className="flex bg-zinc-800/50 p-1 rounded-xl">
                                    {['titles', 'scripts', 'tags', 'strategy'].map((tab) => (
                                        <button
                                            key={tab}
                                            onClick={() => setActiveTab(tab)}
                                            className={cn(
                                                "px-4 py-1.5 rounded-lg text-xs font-black transition-all",
                                                activeTab === tab
                                                    ? "bg-amber-500 text-white shadow-lg"
                                                    : "text-zinc-500 hover:text-zinc-300"
                                            )}
                                        >
                                            {t.ytPlanner[tab === 'titles' ? 'tabTitles' : tab === 'scripts' ? 'tabScripts' : tab === 'tags' ? 'tabTags' : 'tabStrategy']}
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* Content Area */}
                            <div className="flex-1 p-10 font-mono relative overflow-y-auto max-h-[500px] scrollbar-hide">
                                {!showResults ? (
                                    <div className="h-full flex flex-col items-center justify-center text-center space-y-6 opacity-40">
                                        <Terminal className="w-16 h-16" />
                                        <p className="font-mono text-sm uppercase tracking-widest">Waiting for creative input...</p>
                                    </div>
                                ) : (
                                    <div className="animate-in fade-in slide-in-from-bottom-5 duration-500">
                                        <div className="text-amber-500 text-sm mb-6 flex items-center gap-2 select-none">
                                            <ChevronRight className="w-4 h-4" />
                                            <span className="text-zinc-600">~/projects/viral-video</span>
                                            <span className="text-zinc-400">$ plan --output {activeTab}</span>
                                        </div>

                                        <div className="space-y-6">
                                            {activeTab === 'titles' && (
                                                <>
                                                    {generatedContent?.titles.map((title: string, i: number) => (
                                                        <div key={i} className="group relative p-4 rounded-2xl bg-white/5 border border-white/5 hover:border-amber-500/30 transition-all font-sans">
                                                            <p className="text-white text-lg leading-relaxed">{title}</p>
                                                            <button
                                                                onClick={() => handleCopy(title)}
                                                                className="absolute top-4 right-4 opacity-0 group-hover:opacity-100 p-2 text-amber-500 transition-all bg-zinc-900 rounded-lg shadow-xl"
                                                            >
                                                                <Copy className="w-4 h-4" />
                                                            </button>
                                                        </div>
                                                    ))}
                                                    <div className="mt-8 pt-8 border-t border-white/10 space-y-4 font-sans">
                                                        <span className="text-xs font-black text-rose-500 uppercase tracking-widest italic flex items-center gap-2">
                                                            <Sparkles className="w-4 h-4" /> Thumbnail Hook Recommendation
                                                        </span>
                                                        <div className="grid grid-cols-2 gap-3">
                                                            {generatedContent?.thumbnailText.map((text: string, i: number) => (
                                                                <div key={i} className="p-3 bg-rose-500/10 border border-rose-500/20 rounded-xl text-white text-sm font-bold text-center">
                                                                    {text}
                                                                </div>
                                                            ))}
                                                        </div>
                                                    </div>
                                                </>
                                            )}

                                            {activeTab === 'tags' && (
                                                <div className="p-6 rounded-2xl bg-white/5 border border-white/5 font-sans">
                                                    <p className="text-amber-400 text-xl tracking-wide leading-loose">{generatedContent?.tags}</p>
                                                </div>
                                            )}

                                            {activeTab === 'scripts' && (
                                                <div className="p-6 rounded-2xl bg-white/5 border border-white/5 whitespace-pre-wrap font-sans text-white/90 leading-relaxed text-lg">
                                                    {generatedContent?.script}
                                                </div>
                                            )}

                                            {activeTab === 'strategy' && (
                                                <div className="p-6 rounded-2xl bg-white/5 border border-white/5 whitespace-pre-wrap font-sans text-emerald-400 leading-relaxed text-lg">
                                                    {generatedContent?.strategy}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* Footer Copy All Button */}
                            <div className="p-8 bg-zinc-900/50 border-t border-white/5 mt-auto space-y-3">
                                <button
                                    onClick={() => handleCopy(
                                        activeTab === 'titles' ? (generatedContent?.titles.join('\n') || '') :
                                            activeTab === 'tags' ? (generatedContent?.tags || '') :
                                                activeTab === 'scripts' ? (generatedContent?.script || '') :
                                                    (generatedContent?.strategy || '')
                                    )}
                                    disabled={!showResults}
                                    className={cn(
                                        "w-full py-5 rounded-2xl font-black text-lg flex items-center justify-center gap-3 transition-all",
                                        !showResults ? "bg-zinc-800 text-zinc-500 cursor-not-allowed" :
                                            copied ? "bg-emerald-600 text-white" : "bg-white text-zinc-950 hover:bg-zinc-200"
                                    )}
                                >
                                    {copied ? <><Check className="w-6 h-6" /> {t.ytPlanner.copied}</> : <><Copy className="w-6 h-6" /> {t.ytPlanner.copyAll}</>}
                                </button>
                                <div className="grid grid-cols-2 gap-3">
                                    <button
                                        onClick={handleDownload}
                                        disabled={!showResults}
                                        className={cn(
                                            "w-full py-4 rounded-2xl font-bold text-base flex items-center justify-center gap-2 transition-all bg-zinc-800 text-zinc-300 hover:bg-zinc-700",
                                            !showResults && "opacity-50 cursor-not-allowed"
                                        )}
                                    >
                                        <Download className="w-5 h-5" /> .TXT
                                    </button>
                                    <button
                                        onClick={async () => {
                                            await navigator.clipboard.writeText(window.location.href);
                                            alert(t.common.copiedLink);
                                        }}
                                        disabled={!showResults}
                                        className={cn(
                                            "w-full py-4 rounded-2xl font-bold text-base flex items-center justify-center gap-2 transition-all bg-zinc-800 text-zinc-300 hover:bg-zinc-700",
                                            !showResults && "opacity-50 cursor-not-allowed"
                                        )}
                                    >
                                        <svg className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" /></svg>
                                        Share Tool
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {/* Bottom Ad Slot */}
            <div className="max-w-4xl mx-auto px-4 mt-12">
                <AdBanner slot="bottom-banner-planner" />
            </div>

            {/* Guide Section */}
            <div className="mt-24 space-y-16 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-500 px-4">
                <div className="text-center space-y-4">
                    <h2 className="text-3xl font-black sm:text-4xl">{t.ytPlanner.guide.title}</h2>
                    <p className="text-muted-foreground">{t.ytPlanner.guide.subtitle}</p>
                </div>

                <div className="grid md:grid-cols-3 gap-8">
                    {t.ytPlanner.guide.sections.map((section: { title: string; content: string }, i: number) => (
                        <div key={i} className="glass-card p-8 rounded-[2.5rem] space-y-4 hover:shadow-xl transition-shadow border-2 border-amber-500/5">
                            <div className="w-12 h-12 rounded-2xl bg-amber-500/10 flex items-center justify-center text-amber-600 font-black text-xl">
                                {i + 1}
                            </div>
                            <h3 className="text-xl font-bold">{section.title}</h3>
                            <p className="text-muted-foreground leading-relaxed text-sm">
                                {section.content}
                            </p>
                        </div>
                    ))}
                </div>

                {/* FAQ Section */}
                <div className="max-w-3xl mx-auto space-y-8">
                    <h3 className="text-2xl font-black text-center mb-10">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)</h3>
                    <div className="grid gap-4">
                        {t.ytPlanner.guide.faq.map((item: { q: string; a: string }, i: number) => (
                            <div key={i} className="glass-card p-6 rounded-2xl border border-zinc-100 dark:border-zinc-800">
                                <h4 className="font-bold text-lg mb-2 text-amber-600 dark:text-amber-400">Q. {item.q}</h4>
                                <p className="text-muted-foreground text-sm leading-relaxed">{item.a}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </div>

            {/* Next Step Suggestion */}
            <NextStep
                title={t.navbar.ytGrab}
                desc={t.ytGrab.desc}
                href="/tools/youtube-thumbnail"
                iconName="Youtube"
            />
        </div>
    )
}
